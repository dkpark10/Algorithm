# 백준 4577번 소코반

```c++
#include <algorithm>
#include <cstdio>
#include <cstdlib>
#include <cmath>
#include <iostream>
#include <vector>
#include <ctime>
#define LEN 18
#pragma warning(disable:4996)
using namespace std;
int R, C, goal = 0;
char map[LEN][LEN], org[LEN][LEN];
pair<int, int> curcoord;
void Print(int g)
{
	if (goal == 0)
		printf("Game %d: compelte\n", g);
	else
		printf("Game %d: incompelte\n", g);

	for (int i = 0; i < R; i++) {
		for (int j = 0; j < C; j++) {
			printf("%c", map[i][j]);
		}printf("\n");
	}
}
void Copy()
{
	for (int i = 0; i < R; i++) {
		for (int j = 0; j < C; j++) {
			org[i][j] = map[i][j];
		}
	}
}
void setme(pair<int, int>& me)
{
	if (org[me.first][me.second] == '+' ||
		org[me.first][me.second] == 'B' ||
		org[me.first][me.second] == 'W') {
		map[me.first][me.second] = '+';
	}
	else {
		map[me.first][me.second] = '.';
	}
}
void init()
{
	memset(map, 0, sizeof(char) * LEN * LEN);
	memset(org, 0, sizeof(char) * LEN * LEN);
}
bool isout(char bnext)
{
	if (bnext == 'b' ||
		bnext == 'B' ||
		bnext == '#')
		return true;
	else return false;
}
void move(int y, int x)
{
	pair<int, int>me(curcoord);
	int nexty = me.first + y;
	int nextx = me.second + x;

	int bxny = nexty + y;
	int bxnx = nextx + x;

	char next = map[nexty][nextx];
	char bnext = map[bxny][bxnx];

	// 벽이면 리턴
	if (next == '#') return;

	if (next == 'b') {

		if (isout(bnext)) return;

		if (bnext == '.') {
			map[bxny][bxnx] = 'b';
			map[nexty][nextx] = 'w';
			setme(me);
		}
		else if (bnext == '+') {
			goal--;
			map[bxny][bxnx] = 'B';
			map[nexty][nextx] = 'w';
			setme(me);
		}
	}
	else if (next == 'B') {

		if (isout(bnext)) return;

		if (bnext == '.') {
			goal++;
			map[bxny][bxnx] = 'b';
			map[nexty][nextx] = 'W';
			setme(me);
		}
		else if (bnext == '+') {
			map[bxny][bxnx] = 'B';
			map[nexty][nextx] = 'W';
			setme(me);
		}
	}
	else if (next == '+') {
		map[nexty][nextx] = 'W';
		setme(me);
	}
	else {
		map[nexty][nextx] = 'w';
		setme(me);
	}

	// 현재 좌표를 다음좌표로 대입
	curcoord = { nexty,nextx };
}
int main(void)
{
	int game = 0;
	while (scanf("%d %d", &R, &C) && (R || C)) {

		init();
		game++; goal = 0;

		for (int i = 0; i < R; i++) {
			for (int j = 0; j < C; j++) {
				scanf("\n%c", &map[i][j]);
				if (map[i][j] == 'w' || map[i][j] == 'W') {
					curcoord.first = i;
					curcoord.second = j;
				}

				if (map[i][j] == '+' || map[i][j] == 'W')
					goal++;
			}
		}
		Copy();

		string oper;
		cin >> oper;

		for (char& dir : oper) {
			switch (dir) {
			case 'U':
				move(-1, 0); break;
			case 'D':
				move(1, 0); break;
			case 'L':
				move(0, -1); break;
			case 'R':
				move(0, 1); break;
			default:break;
			}

			if (goal == 0) break;
		}
		Print(game);
	}
	return 0;
}
```
